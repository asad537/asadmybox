/*!
 * SmartMenus jQuery Plugin - v1.1.1 - July 23, 2020
 * http://www.smartmenus.org/
 *
 * Copyright Vasil Dinkov, Vadikom Web Ltd.
 * http://vadikom.com
 *
 * Licensed MIT
 */ !function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&"object"==typeof module.exports?module.exports=a(require("jquery")):a(jQuery)}(function($){var menuTrees=[],mouse=!1,touchEvents="ontouchstart"in window,mouseDetectionEnabled=!1,requestAnimationFrame=window.requestAnimationFrame||function(a){return setTimeout(a,1e3/60)},cancelAnimationFrame=window.cancelAnimationFrame||function(a){clearTimeout(a)},canAnimate=!!$.fn.animate;function initMouseDetection(disable){var eNS=".smartmenus_mouse";if(mouseDetectionEnabled||disable)mouseDetectionEnabled&&disable&&($(document).off(eNS),mouseDetectionEnabled=!1);else{var firstTime=!0,lastMove=null,events={mousemove:function(b){var a={x:b.pageX,y:b.pageY,timeStamp:new Date().getTime()};if(lastMove){var c=Math.abs(lastMove.x-a.x),d=Math.abs(lastMove.y-a.y);if((c>0||d>0)&&c<=4&&d<=4&&a.timeStamp-lastMove.timeStamp<=300&&(mouse=!0,firstTime)){var e=$(b.target).closest("a");e.is("a")&&$.each(menuTrees,function(){if($.contains(this.$root[0],e[0]))return this.itemEnter({currentTarget:e[0]}),!1}),firstTime=!1}}lastMove=a}};events[touchEvents?"touchstart":"pointerover pointermove pointerout MSPointerOver MSPointerMove MSPointerOut"]=function(a){isTouchEvent(a.originalEvent)&&(mouse=!1)},$(document).on(getEventsNS(events,eNS)),mouseDetectionEnabled=!0}}function isTouchEvent(e){return!/^(4|mouse)$/.test(e.pointerType)}function getEventsNS(events,eNS){eNS||(eNS="");var eventsNS={};for(var i in events)eventsNS[i.split(" ").join(eNS+" ")+eNS]=events[i];return eventsNS}return $.SmartMenus=function(a,b){this.$root=$(a),this.opts=b,this.rootId="",this.accessIdPrefix="",this.$subArrow=null,this.activatedItems=[],this.visibleSubMenus=[],this.showTimeout=0,this.hideTimeout=0,this.scrollTimeout=0,this.clickActivated=!1,this.focusActivated=!1,this.zIndexInc=0,this.idInc=0,this.$firstLink=null,this.$firstSub=null,this.disabled=!1,this.$disableOverlay=null,this.$touchScrollingSub=null,this.cssTransforms3d="perspective"in a.style||"webkitPerspective"in a.style,this.wasCollapsible=!1,this.init()},$.extend($.SmartMenus,{hideAll:function(){$.each(menuTrees,function(){this.menuHideAll()})},destroy:function(){for(;menuTrees.length;)menuTrees[0].destroy();initMouseDetection(!0)},prototype:{init:function(b){var f=this;if(!b){menuTrees.push(this),this.rootId=(new Date().getTime()+Math.random()+"").replace(/\D/g,""),this.accessIdPrefix="sm-"+this.rootId+"-",this.$root.hasClass("sm-rtl")&&(this.opts.rightToLeftSubMenus=!0);var a=".smartmenus";this.$root.data("smartmenus",this).attr("data-smartmenus-id",this.rootId).dataSM("level",1).on(getEventsNS({"mouseover focusin":$.proxy(this.rootOver,this),"mouseout focusout":$.proxy(this.rootOut,this),keydown:$.proxy(this.rootKeyDown,this)},a)).on(getEventsNS({mouseenter:$.proxy(this.itemEnter,this),mouseleave:$.proxy(this.itemLeave,this),mousedown:$.proxy(this.itemDown,this),focus:$.proxy(this.itemFocus,this),blur:$.proxy(this.itemBlur,this),click:$.proxy(this.itemClick,this)},a),"a"),a+=this.rootId,this.opts.hideOnClick&&$(document).on(getEventsNS({touchstart:$.proxy(this.docTouchStart,this),touchmove:$.proxy(this.docTouchMove,this),touchend:$.proxy(this.docTouchEnd,this),click:$.proxy(this.docClick,this)},a)),$(window).on(getEventsNS({"resize orientationchange":$.proxy(this.winResize,this)},a)),this.opts.subIndicators&&(this.$subArrow=$("<span/>").addClass("sub-arrow"),this.opts.subIndicatorsText&&this.$subArrow.html(this.opts.subIndicatorsText)),initMouseDetection()}if(this.$firstSub=this.$root.find("ul").each(function(){f.menuInit($(this))}).eq(0),this.$firstLink=this.$root.find("a").eq(0),this.opts.markCurrentItem){var c=/(index|default)\.[^#\?\/]*/i,d=/#.*/,e=window.location.href.replace(c,""),g=e.replace(d,"");this.$root.find("a:not(.mega-menu a)").each(function(){var a=this.href.replace(c,""),b=$(this);(a==e||a==g)&&(b.addClass("current"),f.opts.markCurrentTree&&b.parentsUntil("[data-smartmenus-id]","ul").each(function(){$(this).dataSM("parent-a").addClass("current")}))})}this.wasCollapsible=this.isCollapsible()},destroy:function(b){if(!b){var a=".smartmenus";this.$root.removeData("smartmenus").removeAttr("data-smartmenus-id").removeDataSM("level").off(a),a+=this.rootId,$(document).off(a),$(window).off(a),this.opts.subIndicators&&(this.$subArrow=null)}this.menuHideAll();var c=this;this.$root.find("ul").each(function(){var a=$(this);a.dataSM("scroll-arrows")&&a.dataSM("scroll-arrows").remove(),a.dataSM("shown-before")&&((c.opts.subMenusMinWidth||c.opts.subMenusMaxWidth)&&a.css({width:"",minWidth:"",maxWidth:""}).removeClass("sm-nowrap"),a.dataSM("scroll-arrows")&&a.dataSM("scroll-arrows").remove(),a.css({zIndex:"",top:"",left:"",marginLeft:"",marginTop:"",display:""})),0==(a.attr("id")||"").indexOf(c.accessIdPrefix)&&a.removeAttr("id")}).removeDataSM("in-mega").removeDataSM("shown-before").removeDataSM("scroll-arrows").removeDataSM("parent-a").removeDataSM("level").removeDataSM("beforefirstshowfired").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeAttr("aria-expanded"),this.$root.find("a.has-submenu").each(function(){var a=$(this);0==a.attr("id").indexOf(c.accessIdPrefix)&&a.removeAttr("id")}).removeClass("has-submenu").removeDataSM("sub").removeAttr("aria-haspopup").removeAttr("aria-controls").removeAttr("aria-expanded").closest("li").removeDataSM("sub"),this.opts.subIndicators&&this.$root.find("span.sub-arrow").remove(),this.opts.markCurrentItem&&this.$root.find("a.current").removeClass("current"),b||(this.$root=null,this.$firstLink=null,this.$firstSub=null,this.$disableOverlay&&(this.$disableOverlay.remove(),this.$disableOverlay=null),menuTrees.splice($.inArray(this,menuTrees),1))},disable:function(b){if(!this.disabled){if(this.menuHideAll(),!b&&!this.opts.isPopup&&this.$root.is(":visible")){var a=this.$root.offset();this.$disableOverlay=$('<div class="sm-jquery-disable-overlay"/>').css({position:"absolute",top:a.top,left:a.left,width:this.$root.outerWidth(),height:this.$root.outerHeight(),zIndex:this.getStartZIndex(!0),opacity:0}).appendTo(document.body)}this.disabled=!0}},docClick:function(a){if(this.$touchScrollingSub){this.$touchScrollingSub=null;return}(this.visibleSubMenus.length&&!$.contains(this.$root[0],a.target)||$(a.target).closest("a").length)&&this.menuHideAll()},docTouchEnd:function(a){if(this.lastTouch){if(this.visibleSubMenus.length&&(void 0===this.lastTouch.x2||this.lastTouch.x1==this.lastTouch.x2)&&(void 0===this.lastTouch.y2||this.lastTouch.y1==this.lastTouch.y2)&&(!this.lastTouch.target||!$.contains(this.$root[0],this.lastTouch.target))){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0);var b=this;this.hideTimeout=setTimeout(function(){b.menuHideAll()},350)}this.lastTouch=null}},docTouchMove:function(b){if(this.lastTouch){var a=b.originalEvent.touches[0];this.lastTouch.x2=a.pageX,this.lastTouch.y2=a.pageY}},docTouchStart:function(b){var a=b.originalEvent.touches[0];this.lastTouch={x1:a.pageX,y1:a.pageY,target:a.target}},enable:function(){this.disabled&&(this.$disableOverlay&&(this.$disableOverlay.remove(),this.$disableOverlay=null),this.disabled=!1)},getClosestMenu:function(b){for(var a=$(b).closest("ul");a.dataSM("in-mega");)a=a.parent().closest("ul");return a[0]||null},getHeight:function(a){return this.getOffset(a,!0)},getOffset:function(a,d){"none"==a.css("display")&&(e={position:a[0].style.position,visibility:a[0].style.visibility},a.css({position:"absolute",visibility:"hidden"}).show());var e,b=a[0].getBoundingClientRect&&a[0].getBoundingClientRect(),c=b&&(d?b.height||b.bottom-b.top:b.width||b.right-b.left);return c||0===c||(c=d?a[0].offsetHeight:a[0].offsetWidth),e&&a.hide().css(e),c},getStartZIndex:function(b){var a=parseInt(this[b?"$root":"$firstSub"].css("z-index"));return!b&&isNaN(a)&&(a=parseInt(this.$root.css("z-index"))),isNaN(a)?1:a},getTouchPoint:function(a){return a.touches&&a.touches[0]||a.changedTouches&&a.changedTouches[0]||a},getViewport:function(d){var b=d?"Height":"Width",a=document.documentElement["client"+b],c=window["inner"+b];return c&&(a=Math.min(a,c)),a},getViewportHeight:function(){return this.getViewport(!0)},getViewportWidth:function(){return this.getViewport()},getWidth:function(a){return this.getOffset(a)},handleEvents:function(){return!this.disabled&&this.isCSSOn()},handleItemEvents:function(a){return this.handleEvents()&&!this.isLinkInMegaMenu(a)},isCollapsible:function(){return"static"==this.$firstSub.css("position")},isCSSOn:function(){return"inline"!=this.$firstLink.css("display")},isFixed:function(){var a="fixed"==this.$root.css("position");return a||this.$root.parentsUntil("body").each(function(){if("fixed"==$(this).css("position"))return a=!0,!1}),a},isLinkInMegaMenu:function(a){return $(this.getClosestMenu(a[0])).hasClass("mega-menu")},isTouchMode:function(){return!mouse||this.opts.noMouseOver||this.isCollapsible()},itemActivate:function(b,e){var c=b.closest("ul"),a=c.dataSM("level");if(a>1&&(!this.activatedItems[a-2]||this.activatedItems[a-2][0]!=c.dataSM("parent-a")[0])){var f=this;$(c.parentsUntil("[data-smartmenus-id]","ul").get().reverse()).add(c).each(function(){f.itemActivate($(this).dataSM("parent-a"))})}if((!this.isCollapsible()||e)&&this.menuHideSubMenus(this.activatedItems[a-1]&&this.activatedItems[a-1][0]==b[0]?a:a-1),this.activatedItems[a-1]=b,!1!==this.$root.triggerHandler("activate.smapi",b[0])){var d=b.dataSM("sub");d&&(this.isTouchMode()|| !this.opts.showOnClick||this.clickActivated)&&this.menuShow(d)}},itemBlur:function(b){var a=$(b.currentTarget);this.handleItemEvents(a)&&this.$root.triggerHandler("blur.smapi",a[0])},itemClick:function(d){var a=$(d.currentTarget);if(this.handleItemEvents(a)){if(this.$touchScrollingSub&&this.$touchScrollingSub[0]==a.closest("ul")[0])return this.$touchScrollingSub=null,d.stopPropagation(),!1;if(!1===this.$root.triggerHandler("click.smapi",a[0]))return!1;var b=a.dataSM("sub"),e=!!b&&2==b.dataSM("level");if(b){var f=$(d.target).is(".sub-arrow"),c=this.isCollapsible(),h=/toggle$/.test(this.opts.collapsibleBehavior),i=/link$/.test(this.opts.collapsibleBehavior),g=/^accordion/.test(this.opts.collapsibleBehavior);if(b.is(":visible")){if(!c&&this.opts.showOnClick&&e)return this.menuHide(b),this.clickActivated=!1,this.focusActivated=!1,!1;if(c&&(h||f))return this.itemActivate(a,g),this.menuHide(b),!1}else if((!i||!c||f)&&(!c&&this.opts.showOnClick&&e&&(this.clickActivated=!0),this.itemActivate(a,g),b.is(":visible")))return this.focusActivated=!0,!1}if(!c&&this.opts.showOnClick&&e||a.hasClass("disabled")|| !1===this.$root.triggerHandler("select.smapi",a[0]))return!1}},itemDown:function(b){var a=$(b.currentTarget);this.handleItemEvents(a)&&a.dataSM("mousedown",!0)},itemEnter:function(b){var a=$(b.currentTarget);if(this.handleItemEvents(a)){if(!this.isTouchMode()){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=0);var c=this;this.showTimeout=setTimeout(function(){c.itemActivate(a)},this.opts.showOnClick&&1==a.closest("ul").dataSM("level")?1:this.opts.showTimeout)}this.$root.triggerHandler("mouseenter.smapi",a[0])}},itemFocus:function(b){var a=$(b.currentTarget);this.handleItemEvents(a)&&(!this.focusActivated||this.isTouchMode()&&a.dataSM("mousedown")||this.activatedItems.length&&this.activatedItems[this.activatedItems.length-1][0]==a[0]||this.itemActivate(a,!0),this.$root.triggerHandler("focus.smapi",a[0]))},itemLeave:function(b){var a=$(b.currentTarget);this.handleItemEvents(a)&&(!this.isTouchMode()&&(a[0].blur(),this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=0)),a.removeDataSM("mousedown"),this.$root.triggerHandler("mouseleave.smapi",a[0]))},menuHide:function(a){if(!1!==this.$root.triggerHandler("beforehide.smapi",a[0])&&(canAnimate&&a.stop(!0,!0),"none"!=a.css("display"))){var b=function(){a.css("z-index","")};this.isCollapsible()?canAnimate&&this.opts.collapsibleHideFunction?this.opts.collapsibleHideFunction.call(this,a,b):a.hide(this.opts.collapsibleHideDuration,b):canAnimate&&this.opts.hideFunction?this.opts.hideFunction.call(this,a,b):a.hide(this.opts.hideDuration,b),a.dataSM("scroll")&&(this.menuScrollStop(a),a.css({"touch-action":"","-ms-touch-action":"","-webkit-transform":"",transform:""}).off(".smartmenus_scroll").removeDataSM("scroll").dataSM("scroll-arrows").hide()),a.dataSM("parent-a").removeClass("highlighted").attr("aria-expanded","false"),a.attr({"aria-expanded":"false","aria-hidden":"true"});var c=a.dataSM("level");this.activatedItems.splice(c-1,1),this.visibleSubMenus.splice($.inArray(a,this.visibleSubMenus),1),this.$root.triggerHandler("hide.smapi",a[0])}},menuHideAll:function(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=0);for(var b=this.opts.isPopup?1:0,a=this.visibleSubMenus.length-1;a>=b;a--)this.menuHide(this.visibleSubMenus[a]);this.opts.isPopup&&(canAnimate&&this.$root.stop(!0,!0),this.$root.is(":visible")&&(canAnimate&&this.opts.hideFunction?this.opts.hideFunction.call(this,this.$root):this.$root.hide(this.opts.hideDuration))),this.activatedItems=[],this.visibleSubMenus=[],this.clickActivated=!1,this.focusActivated=!1,this.zIndexInc=0,this.$root.triggerHandler("hideAll.smapi")},menuHideSubMenus:function(c){for(var a=this.activatedItems.length-1;a>=c;a--){var b=this.activatedItems[a].dataSM("sub");b&&this.menuHide(b)}},menuInit:function(a){if(!a.dataSM("in-mega")){a.hasClass("mega-menu")&&a.find("ul").dataSM("in-mega",!0);for(var c=2,d=a[0];(d=d.parentNode.parentNode)!=this.$root[0];)c++;var b=a.prevAll("a").eq(-1);b.length||(b=a.prevAll().find("a").eq(-1)),b.addClass("has-submenu").dataSM("sub",a),a.dataSM("parent-a",b).dataSM("level",c).parent().dataSM("sub",a);var e=b.attr("id")||this.accessIdPrefix+ ++this.idInc,f=a.attr("id")||this.accessIdPrefix+ ++this.idInc;b.attr({id:e,"aria-haspopup":"true","aria-controls":f,"aria-expanded":"false"}),a.attr({id:f,role:"group","aria-hidden":"true","aria-labelledby":e,"aria-expanded":"false"}),this.opts.subIndicators&&b[this.opts.subIndicatorsPos](this.$subArrow.clone())}},menuPosition:function(a){var b,d,l=a.dataSM("parent-a"),q=l.closest("li"),t=q.parent(),r=a.dataSM("level"),f=this.getWidth(a),c=this.getHeight(a),u=l.offset(),z=u.left,A=u.top,s=this.getWidth(l),k=this.getHeight(l),v=$(window),m=v.scrollLeft(),g=v.scrollTop(),w=this.getViewportWidth(),h=this.getViewportHeight(),e=t.parent().is("[data-sm-horizontal-sub]")||2==r&&!t.hasClass("sm-vertical"),n=this.opts.rightToLeftSubMenus&&!q.is("[data-sm-reverse]")|| !this.opts.rightToLeftSubMenus&&q.is("[data-sm-reverse]"),i=2==r?this.opts.mainMenuSubOffsetX:this.opts.subMenusSubOffsetX,o=2==r?this.opts.mainMenuSubOffsetY:this.opts.subMenusSubOffsetY;if(e?(b=n?s-f-i:i,d=this.opts.bottomToTopSubMenus?-c-o:k+o):(b=n?i-f:s-i,d=this.opts.bottomToTopSubMenus?k-o-c:o),this.opts.keepInViewport){var p=z+b,j=A+d;if(n&&p<m?b=e?m-p+b:s-i:!n&&p+f>m+w&&(b=e?m+w-f-p+b:i-f),!e&&(c<h&&j+c>g+h?d+=g+h-c-j:(c>=h||j<g)&&(d+=g-j)),e&&(j+c>g+h+.49||j<g)|| !e&&c>h+.49){var B=this;a.dataSM("scroll-arrows")||a.dataSM("scroll-arrows",$([$('<span class="scroll-up"><span class="scroll-up-arrow"></span></span>')[0],$('<span class="scroll-down"><span class="scroll-down-arrow"></span></span>')[0]]).on({mouseenter:function(){a.dataSM("scroll").up=$(this).hasClass("scroll-up"),B.menuScroll(a)},mouseleave:function(b){B.menuScrollStop(a),B.menuScrollOut(a,b)},"mousewheel DOMMouseScroll":function(a){a.preventDefault()}}).insertAfter(a));var x=".smartmenus_scroll";if(a.dataSM("scroll",{y:this.cssTransforms3d?0:d-k,step:1,itemH:k,subH:c,arrowDownH:this.getHeight(a.dataSM("scroll-arrows").eq(1))}).on(getEventsNS({mouseover:function(b){B.menuScrollOver(a,b)},mouseout:function(b){B.menuScrollOut(a,b)},"mousewheel DOMMouseScroll":function(b){B.menuScrollMousewheel(a,b)}},x)).dataSM("scroll-arrows").css({top:"auto",left:"0",marginLeft:b+(parseInt(a.css("border-left-width"))||0),width:f-(parseInt(a.css("border-left-width"))||0)-(parseInt(a.css("border-right-width"))||0),zIndex:a.css("z-index")}).eq(e&&this.opts.bottomToTopSubMenus?0:1).show(),this.isFixed()){var y={};y[touchEvents?"touchstart touchmove touchend":"pointerdown pointermove pointerup MSPointerDown MSPointerMove MSPointerUp"]=function(b){B.menuScrollTouch(a,b)},a.css({"touch-action":"none","-ms-touch-action":"none"}).on(getEventsNS(y,x))}}}a.css({top:"auto",left:"0",marginLeft:b,marginTop:d-k})},menuScroll:function(b,f,h){var c,a=b.dataSM("scroll"),g=b.dataSM("scroll-arrows"),d=a.up?a.upEnd:a.downEnd;if(!f&&a.momentum){if(a.momentum*=.92,(c=a.momentum)<.5){this.menuScrollStop(b);return}}else c=h||(f||!this.opts.scrollAccelerate?this.opts.scrollStep:Math.floor(a.step));var e=b.dataSM("level");if(this.activatedItems[e-1]&&this.activatedItems[e-1].dataSM("sub")&&this.activatedItems[e-1].dataSM("sub").is(":visible")&&this.menuHideSubMenus(e-1),a.y=a.up&&d<=a.y|| !a.up&&d>=a.y?a.y:Math.abs(d-a.y)>c?a.y+(a.up?c:-c):d,b.css(this.cssTransforms3d?{"-webkit-transform":"translate3d(0, "+a.y+"px, 0)",transform:"translate3d(0, "+a.y+"px, 0)"}:{marginTop:a.y}),mouse&&(a.up&&a.y>a.downEnd|| !a.up&&a.y<a.upEnd)&&g.eq(a.up?1:0).show(),a.y==d)mouse&&g.eq(a.up?0:1).hide(),this.menuScrollStop(b);else if(!f){this.opts.scrollAccelerate&&a.step<this.opts.scrollStep&&(a.step+=.2);var i=this;this.scrollTimeout=requestAnimationFrame(function(){i.menuScroll(b)})}},menuScrollMousewheel:function(b,a){if(this.getClosestMenu(a.target)==b[0]){var c=((a=a.originalEvent).wheelDelta||-a.detail)>0;b.dataSM("scroll-arrows").eq(c?0:1).is(":visible")&&(b.dataSM("scroll").up=c,this.menuScroll(b,!0))}a.preventDefault()},menuScrollOut:function(a,b){!mouse||/^scroll-(up|down)/.test((b.relatedTarget||"").className)||(a[0]==b.relatedTarget||$.contains(a[0],b.relatedTarget))&&this.getClosestMenu(b.relatedTarget)==a[0]||a.dataSM("scroll-arrows").css("visibility","hidden")},menuScrollOver:function(a,b){if(mouse&& !/^scroll-(up|down)/.test(b.target.className)&&this.getClosestMenu(b.target)==a[0]){this.menuScrollRefreshData(a);var c=a.dataSM("scroll"),d=$(window).scrollTop()-a.dataSM("parent-a").offset().top-c.itemH;a.dataSM("scroll-arrows").eq(0).css("margin-top",d).end().eq(1).css("margin-top",d+this.getViewportHeight()-c.arrowDownH).end().css("visibility","visible")}},menuScrollRefreshData:function(b){var c=b.dataSM("scroll"),a=$(window).scrollTop()-b.dataSM("parent-a").offset().top-c.itemH;this.cssTransforms3d&&(a=-(parseFloat(b.css("margin-top"))-a)),$.extend(c,{upEnd:a,downEnd:a+this.getViewportHeight()-c.subH})},menuScrollStop:function(a){if(this.scrollTimeout)return cancelAnimationFrame(this.scrollTimeout),this.scrollTimeout=0,a.dataSM("scroll").step=1,!0},menuScrollTouch:function(c,b){if(isTouchEvent(b=b.originalEvent)){var d=this.getTouchPoint(b);if(this.getClosestMenu(d.target)==c[0]){var a=c.dataSM("scroll");if(/(start|down)$/i.test(b.type))this.menuScrollStop(c)?(b.preventDefault(),this.$touchScrollingSub=c):this.$touchScrollingSub=null,this.menuScrollRefreshData(c),$.extend(a,{touchStartY:d.pageY,touchStartTime:b.timeStamp});else if(/move$/i.test(b.type)){var e=void 0!==a.touchY?a.touchY:a.touchStartY;if(void 0!==e&&e!=d.pageY){this.$touchScrollingSub=c;var f=e<d.pageY;void 0!==a.up&&a.up!=f&&$.extend(a,{touchStartY:d.pageY,touchStartTime:b.timeStamp}),$.extend(a,{up:f,touchY:d.pageY}),this.menuScroll(c,!0,Math.abs(d.pageY-e))}b.preventDefault()}else void 0!==a.touchY&&((a.momentum=15*Math.pow(Math.abs(d.pageY-a.touchStartY)/(b.timeStamp-a.touchStartTime),2))&&(this.menuScrollStop(c),this.menuScroll(c),b.preventDefault()),delete a.touchY)}}},menuShow:function(a){if((a.dataSM("beforefirstshowfired")||(a.dataSM("beforefirstshowfired",!0),!1!==this.$root.triggerHandler("beforefirstshow.smapi",a[0])))&& !1!==this.$root.triggerHandler("beforeshow.smapi",a[0])&&(a.dataSM("shown-before",!0),canAnimate&&a.stop(!0,!0),!a.is(":visible"))){var d=a.dataSM("parent-a"),c=this.isCollapsible();if((this.opts.keepHighlighted||c)&&d.addClass("highlighted"),c)a.removeClass("sm-nowrap").css({zIndex:"",width:"auto",minWidth:"",maxWidth:"",top:"",left:"",marginLeft:"",marginTop:""});else{if(a.css("z-index",this.zIndexInc=(this.zIndexInc||this.getStartZIndex())+1),(this.opts.subMenusMinWidth||this.opts.subMenusMaxWidth)&&(a.css({width:"auto",minWidth:"",maxWidth:""}).addClass("sm-nowrap"),this.opts.subMenusMinWidth&&a.css("min-width",this.opts.subMenusMinWidth),this.opts.subMenusMaxWidth)){var e=this.getWidth(a);a.css("max-width",this.opts.subMenusMaxWidth),e>this.getWidth(a)&&a.removeClass("sm-nowrap").css("width",this.opts.subMenusMaxWidth)}this.menuPosition(a)}var b=function(){a.css("overflow","")};c?canAnimate&&this.opts.collapsibleShowFunction?this.opts.collapsibleShowFunction.call(this,a,b):a.show(this.opts.collapsibleShowDuration,b):canAnimate&&this.opts.showFunction?this.opts.showFunction.call(this,a,b):a.show(this.opts.showDuration,b),d.attr("aria-expanded","true"),a.attr({"aria-expanded":"true","aria-hidden":"false"}),this.visibleSubMenus.push(a),this.$root.triggerHandler("show.smapi",a[0])}},popupHide:function(a){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0);var b=this;this.hideTimeout=setTimeout(function(){b.menuHideAll()},a?1:this.opts.hideTimeout)},popupShow:function(b,c){if(!this.opts.isPopup){alert('SmartMenus jQuery Error:\n\nIf you want to show this menu via the "popupShow" method, set the isPopup:true option.');return}if(this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0),this.$root.dataSM("shown-before",!0),canAnimate&&this.$root.stop(!0,!0),!this.$root.is(":visible")){this.$root.css({left:b,top:c});var d=this,a=function(){d.$root.css("overflow","")};canAnimate&&this.opts.showFunction?this.opts.showFunction.call(this,this.$root,a):this.$root.show(this.opts.showDuration,a),this.visibleSubMenus[0]=this.$root}},refresh:function(){this.destroy(!0),this.init(!0)},rootKeyDown:function(b){if(this.handleEvents())switch(b.keyCode){case 27:var c=this.activatedItems[0];if(c){this.menuHideAll(),c[0].focus();var a=c.dataSM("sub");a&&this.menuHide(a)}break;case 32:var d=$(b.target);if(d.is("a")&&this.handleItemEvents(d)){var a=d.dataSM("sub");a&&!a.is(":visible")&&(this.itemClick({currentTarget:b.target}),b.preventDefault())}}},rootOut:function(a){if(!(!this.handleEvents()||this.isTouchMode())&&a.target!=this.$root[0]&&(this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0),!this.opts.showOnClick||!this.opts.hideOnClick)){var b=this;this.hideTimeout=setTimeout(function(){b.menuHideAll()},this.opts.hideTimeout)}},rootOver:function(a){!(!this.handleEvents()||this.isTouchMode())&&a.target!=this.$root[0]&&this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0)},winResize:function(c){if(!this.handleEvents()){if(this.$disableOverlay){var a=this.$root.offset();this.$disableOverlay.css({top:a.top,left:a.left,width:this.$root.outerWidth(),height:this.$root.outerHeight()})}return}if(!("onorientationchange"in window)||"orientationchange"==c.type){var b=this.isCollapsible();this.wasCollapsible&&b||(this.activatedItems.length&&this.activatedItems[this.activatedItems.length-1][0].blur(),this.menuHideAll()),this.wasCollapsible=b}}}}),$.fn.dataSM=function(a,b){return b?this.data(a+"_smartmenus",b):this.data(a+"_smartmenus")},$.fn.removeDataSM=function(a){return this.removeData(a+"_smartmenus")},$.fn.smartmenus=function(options){if("string"==typeof options){var args=arguments,method=options;return Array.prototype.shift.call(args),this.each(function(){var a=$(this).data("smartmenus");a&&a[method]&&a[method].apply(a,args)})}return this.each(function(){var dataOpts=$(this).data("sm-options")||null;if(dataOpts&&"object"!=typeof dataOpts)try{dataOpts=eval("("+dataOpts+")")}catch(e){dataOpts=null,alert('ERROR\n\nSmartMenus jQuery init:\nInvalid "data-sm-options" attribute value syntax.')}new $.SmartMenus(this,$.extend({},$.fn.smartmenus.defaults,options,dataOpts))})},$.fn.smartmenus.defaults={isPopup:!1,mainMenuSubOffsetX:0,mainMenuSubOffsetY:0,subMenusSubOffsetX:0,subMenusSubOffsetY:0,subMenusMinWidth:"10em",subMenusMaxWidth:"20em",subIndicators:!0,subIndicatorsPos:"append",subIndicatorsText:"",scrollStep:30,scrollAccelerate:!0,showTimeout:250,hideTimeout:500,showDuration:0,showFunction:null,hideDuration:0,hideFunction:function(a,b){a.fadeOut(200,b)},collapsibleShowDuration:0,collapsibleShowFunction:function(a,b){a.slideDown(200,b)},collapsibleHideDuration:0,collapsibleHideFunction:function(a,b){a.slideUp(200,b)},showOnClick:!1,hideOnClick:!0,noMouseOver:!1,keepInViewport:!0,keepHighlighted:!0,markCurrentItem:!1,markCurrentTree:!0,rightToLeftSubMenus:!1,bottomToTopSubMenus:!1,collapsibleBehavior:"default"},$})